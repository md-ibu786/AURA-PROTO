---
phase: 03-header-mobile
plan: 03-01
type: execute
---

<objective>
Add hamburger menu button to Header.tsx (visible only on mobile) and truncate breadcrumbs for mobile screens.

Purpose: The header is the user's primary control surface. On mobile, it needs a hamburger button to open the sidebar (since the sidebar is hidden by default) and breadcrumbs must be truncated to prevent overflow.
Output: Updated Header.tsx with hamburger button and responsive breadcrumbs.
</objective>

<execution_context>
@~/.claude/skills/create-plans/workflows/execute-phase.md
@~/.claude/skills/create-plans/templates/summary.md
</execution_context>

<context>
@.planning/mobile-responsive/ROADMAP.md
@frontend/src/components/layout/Header.tsx
@frontend/src/stores/useExplorerStore.ts
@frontend/src/hooks/useMobileBreakpoint.ts
@frontend/src/styles/explorer.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add hamburger button and truncate breadcrumbs in Header.tsx</name>
  <files>frontend/src/components/layout/Header.tsx</files>
  <action>
  1. Import `useMobileBreakpoint` hook:
     ```typescript
     import { useMobileBreakpoint } from '../../hooks/useMobileBreakpoint';
     ```

  2. Import `Menu` icon from lucide-react (add to existing imports):
     ```typescript
     import { ChevronRight, ChevronUp, Search, LayoutGrid, List, Home, Menu } from 'lucide-react';
     ```

  3. Inside the component, add:
     ```typescript
     const { setMobileMenuOpen } = useExplorerStore();
     const isMobile = useMobileBreakpoint();
     ```

  4. Add the hamburger button as the FIRST child inside `<header className="explorer-header">`, BEFORE the nav-buttons div:
     ```tsx
     {isMobile && (
         <button
             className="nav-btn"
             onClick={() => setMobileMenuOpen(true)}
             title="Open menu"
         >
             <Menu size={20} />
         </button>
     )}
     ```

  5. Truncate breadcrumbs on mobile. Replace the breadcrumb mapping logic with:
     ```tsx
     <nav className="breadcrumbs">
         <button
             className={`breadcrumb-item ${currentPath.length === 0 ? 'active' : ''}`}
             onClick={goHome}
         >
             <Home size={14} />
             {!isMobile && <span>Home</span>}
         </button>

         {isMobile && currentPath.length > 0 ? (
             /* Mobile: show only "..." separator and current folder */
             <span className="flex items-center">
                 <ChevronRight size={14} className="breadcrumb-separator" />
                 {currentPath.length > 1 && (
                     <>
                         <span className="breadcrumb-item" style={{ opacity: 0.5 }}>...</span>
                         <ChevronRight size={14} className="breadcrumb-separator" />
                     </>
                 )}
                 <button
                     className="breadcrumb-item active"
                     onClick={() => navigateToBreadcrumb(currentPath.length - 1)}
                 >
                     {currentPath[currentPath.length - 1].label}
                 </button>
             </span>
         ) : (
             /* Desktop: show full breadcrumb trail */
             currentPath.map((node, index) => (
                 <span key={node.id} className="flex items-center">
                     <ChevronRight size={14} className="breadcrumb-separator" />
                     <button
                         className={`breadcrumb-item ${index === currentPath.length - 1 ? 'active' : ''}`}
                         onClick={() => navigateToBreadcrumb(index)}
                     >
                         {node.label}
                     </button>
                 </span>
             ))
         )}
     </nav>
     ```

  This gives mobile users: `ðŸ  > ... > Current Folder` instead of the full path.
  </action>
  <verify>Run `cd frontend && npx tsc --noEmit` to confirm no type errors</verify>
  <done>Hamburger button visible on mobile, breadcrumbs truncated, desktop shows full breadcrumbs, type check passes</done>
</task>

<task type="auto">
  <name>Task 2: Add mobile header CSS styles</name>
  <files>frontend/src/styles/explorer.css</files>
  <action>
  Inside the existing `@media (max-width: 768px)` block in explorer.css, add header-specific mobile styles:

  ```css
      /* Header: reduce padding and gap on mobile */
      .explorer-header {
          gap: var(--spacing-sm);
          padding: var(--spacing-xs) var(--spacing-sm);
          min-height: 44px;
      }

      /* Breadcrumbs: constrain width */
      .breadcrumbs {
          min-width: 0;
          flex: 1;
      }

      .breadcrumb-item {
          font-size: 12px;
          padding: var(--spacing-xs);
          max-width: 150px;
          overflow: hidden;
          text-overflow: ellipsis;
      }
  ```

  These ensure the header doesn't overflow on narrow screens and breadcrumb text is truncated if still too long.
  </action>
  <verify>Run `cd frontend && npm run build` to verify build succeeds</verify>
  <done>Mobile header styles exist, breadcrumbs constrained, header gap reduced, build passes</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `cd frontend && npx tsc --noEmit` passes
- [ ] `cd frontend && npm run build` passes
- [ ] Hamburger button appears only on mobile viewport
- [ ] Clicking hamburger opens the sidebar (via setMobileMenuOpen)
- [ ] Breadcrumbs show truncated path on mobile
- [ ] Desktop header unchanged
</verification>

<success_criteria>
- Hamburger button visible only on screens <= 768px
- Breadcrumbs show `Home > ... > Current` on mobile
- Desktop breadcrumbs show full path as before
- No overflow on mobile header
- Build and type check pass
</success_criteria>

<output>
After completion, create `.planning/mobile-responsive/phases/03-header-mobile/03-01-SUMMARY.md`
</output>
