---
phase: 05-dialogs-action-bar
plan: 05-01
type: execute
---

<objective>
Make the SelectionActionBar mobile-friendly with icon-only buttons and compact layout.

Purpose: The SelectionActionBar is a floating pill at the bottom of the screen with 5+ labeled buttons (Open, Download, Vectorize, Delete KG, Delete). On a 375px screen, these buttons with text labels will overflow. Switching to icon-only mode on mobile keeps all actions accessible in a compact form.
Output: Updated SelectionActionBar.tsx with mobile-aware rendering and responsive CSS.
</objective>

<execution_context>
@~/.claude/skills/create-plans/workflows/execute-phase.md
@~/.claude/skills/create-plans/templates/summary.md
</execution_context>

<context>
@.planning/mobile-responsive/ROADMAP.md
@frontend/src/components/explorer/SelectionActionBar.tsx
@frontend/src/hooks/useMobileBreakpoint.ts
@frontend/src/styles/explorer.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add icon-only mode to SelectionActionBar.tsx</name>
  <files>frontend/src/components/explorer/SelectionActionBar.tsx</files>
  <action>
  1. Import the mobile breakpoint hook:
     ```typescript
     import { useMobileBreakpoint } from '../../hooks/useMobileBreakpoint';
     ```

  2. Inside the component, add:
     ```typescript
     const isMobile = useMobileBreakpoint();
     ```

  3. For each action button, conditionally hide the text `<span>` on mobile. Replace each pattern of:
     ```tsx
     <SomeIcon />
     <span>Label</span>
     ```
     with:
     ```tsx
     <SomeIcon size={isMobile ? 18 : undefined} />
     {!isMobile && <span>Label</span>}
     ```

  Apply this to ALL action buttons:
  - Open button: `<ExternalLink />` + `<span>Open</span>`
  - Download button: `<Download />` + `<span>Download</span>`
  - Vectorize button: `<Sparkles />` + `<span>Vectorize</span>`
  - Delete KG button: `<Database />` + `<span>Delete KG</span>`
  - Delete button: `<Trash2 />` + `<span>Delete</span>`
  - Cleaning up state: `<Loader2 />` + `<span>Cleaning up...</span>` → keep spinner text on mobile too for clarity

  4. For the selection count, make it more compact on mobile:
     ```tsx
     <span className="selection-count">
         {deleteProgress
             ? `${deleteProgress.current}/${deleteProgress.total}...`
             : isMobile ? `${count}` : `${count} selected`
         }
     </span>
     ```

  Do NOT change any button functionality — only visibility of text labels.
  </action>
  <verify>Run `cd frontend && npx tsc --noEmit` to confirm no type errors</verify>
  <done>Action bar shows icon-only buttons on mobile, desktop shows icons + labels, type check passes</done>
</task>

<task type="auto">
  <name>Task 2: Add mobile SelectionActionBar CSS</name>
  <files>frontend/src/styles/explorer.css</files>
  <action>
  Inside the existing `@media (max-width: 768px)` block in explorer.css, add:

  ```css
      /* ===== Selection Action Bar Mobile ===== */
      .selection-action-bar-container {
          bottom: 16px;
          left: 50%;
          right: auto;
          max-width: calc(100vw - 32px);
      }

      .selection-action-bar {
          gap: var(--spacing-sm);
          padding: var(--spacing-sm) var(--spacing-md);
          min-height: 44px;
      }

      /* Compact selection info on mobile */
      .selection-info {
          padding-right: var(--spacing-sm);
          gap: var(--spacing-xs);
      }

      .selection-count {
          font-size: 12px;
      }

      /* Action buttons: ensure touch-friendly size */
      .selection-action-btn {
          padding: var(--spacing-xs);
          min-width: 36px;
          min-height: 36px;
          justify-content: center;
      }

      .selection-action-btn svg {
          width: 18px;
          height: 18px;
      }
  ```

  This ensures:
  - Action bar doesn't exceed viewport width (max-width constraint)
  - Touch-friendly button sizes (36px minimum)
  - Compact spacing to fit all icons
  </action>
  <verify>Run `cd frontend && npm run build` to verify build succeeds</verify>
  <done>Action bar CSS responsive, fits within mobile viewport, touch targets sized, build passes</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `cd frontend && npx tsc --noEmit` passes
- [ ] `cd frontend && npm run build` passes
- [ ] Mobile: action bar shows icon-only buttons
- [ ] Mobile: selection count is compact
- [ ] Mobile: action bar fits within viewport
- [ ] Desktop: action bar shows icons + text labels as before
- [ ] All action button functionality preserved
</verification>

<success_criteria>
- Icon-only mode on mobile, full labels on desktop
- Action bar doesn't overflow on 375px screens
- Touch targets minimum 36px
- All bulk actions still functional
- Build and type check pass
</success_criteria>

<output>
After completion, create `.planning/mobile-responsive/phases/05-dialogs-action-bar/05-01-SUMMARY.md`
</output>
