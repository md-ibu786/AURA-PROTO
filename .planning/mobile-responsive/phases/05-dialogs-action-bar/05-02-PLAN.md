---
phase: 05-dialogs-action-bar
plan: 05-02
type: execute
---

<objective>
Ensure all dialog components (UploadDialog, ConfirmDialog, ProcessDialog, DeleteFromKGDialog) fit within mobile viewports.

Purpose: Dialogs with fixed max-widths (420px, 440px, 520px) may exceed small mobile screens (375px). Capping at 90vw and adjusting internal padding ensures all dialogs remain usable on any device.
Output: Updated explorer.css with mobile dialog rules. CSS-only solution (no component changes needed).
</objective>

<execution_context>
@~/.claude/skills/create-plans/workflows/execute-phase.md
@~/.claude/skills/create-plans/templates/summary.md
</execution_context>

<context>
@.planning/mobile-responsive/ROADMAP.md
@frontend/src/styles/explorer.css
@frontend/src/components/explorer/UploadDialog.tsx
@frontend/src/components/ui/ConfirmDialog.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add mobile dialog CSS rules</name>
  <files>frontend/src/styles/explorer.css</files>
  <action>
  Inside the existing `@media (max-width: 768px)` block in explorer.css, add dialog-specific mobile styles:

  ```css
      /* ===== Dialogs Mobile ===== */
      /* Cap all dialogs to 90% viewport width */
      .dialog,
      .upload-dialog,
      .confirm-dialog-v2 {
          max-width: 90vw;
      }

      .confirm-dialog-card {
          max-width: 90vw;
          padding: var(--spacing-lg);
      }

      /* Dialog content: less padding on mobile */
      .dialog-body {
          padding: var(--spacing-md);
      }

      .dialog-header {
          padding: var(--spacing-sm) var(--spacing-md);
      }

      .dialog-footer {
          padding: var(--spacing-sm) var(--spacing-md);
      }

      /* Dialog title: slightly smaller on mobile */
      .dialog-title {
          font-size: 16px;
      }

      /* Dialog content wrapper: stack vertically on very small screens */
      .dialog-content-wrapper {
          flex-direction: column;
          gap: var(--spacing-md);
      }

      /* Dialog icon container: smaller on mobile */
      .dialog-icon-container {
          width: 40px;
          height: 40px;
      }

      /* Dialog buttons: full width on mobile for better touch targets */
      .dialog-actions-row {
          flex-direction: column-reverse;
          gap: var(--spacing-sm);
      }

      .dialog-btn {
          width: 100%;
          text-align: center;
          min-height: 44px;
          display: flex;
          align-items: center;
          justify-content: center;
      }

      /* ===== Upload Dialog Mobile ===== */
      /* Upload option cards: reduce gap and padding */
      .upload-option-card {
          gap: var(--spacing-md);
          padding: var(--spacing-md);
      }

      .upload-option-icon {
          width: 44px;
          height: 44px;
      }

      /* Upload zone: reduce minimum height and padding */
      .upload-zone {
          padding: var(--spacing-lg);
          min-height: 140px;
      }

      /* Upload file name: constrain width */
      .upload-file-name {
          max-width: 200px;
      }

      /* Upload actions: stack vertically */
      .upload-actions {
          flex-direction: column-reverse;
      }

      .upload-actions button {
          width: 100%;
      }
  ```

  Key decisions:
  - `max-width: 90vw` prevents any dialog from exceeding mobile viewport
  - `flex-direction: column-reverse` on dialog actions puts primary action (confirm/submit) at the bottom, making it easier to reach with thumb
  - `min-height: 44px` on buttons ensures WCAG 2.1 AA touch target compliance
  - Upload zone padding reduced but still has enough room for drag-drop (140px min height)
  </action>
  <verify>Run `cd frontend && npm run build` to verify build succeeds</verify>
  <done>All dialogs capped at 90vw, buttons full-width on mobile, touch targets compliant, build passes</done>
</task>

<task type="auto">
  <name>Task 2: Add mobile context menu CSS</name>
  <files>frontend/src/styles/explorer.css</files>
  <action>
  Inside the existing `@media (max-width: 768px)` block, add context menu mobile styles:

  ```css
      /* ===== Context Menu Mobile ===== */
      .context-menu {
          min-width: 200px;
          max-width: calc(100vw - 32px);
      }

      .context-menu-item {
          min-height: 40px;
          font-size: 14px;
      }
  ```

  This ensures context menus don't overflow on mobile and have adequate touch targets.
  </action>
  <verify>Run `cd frontend && npm run build` to verify build succeeds</verify>
  <done>Context menu constrained to viewport, touch targets adequate, build passes</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `cd frontend && npm run build` passes
- [ ] All dialogs capped at 90vw on mobile
- [ ] Dialog buttons are full-width on mobile
- [ ] Touch targets >= 44px for dialog buttons
- [ ] Upload dialog zone readable on mobile
- [ ] Context menu fits within viewport
- [ ] Desktop dialog behavior unchanged
</verification>

<success_criteria>
- Pure CSS solution (no React component changes)
- All dialogs usable on 375px screens
- Button ordering optimized for thumb reach
- Build passes cleanly
</success_criteria>

<output>
After completion, create `.planning/mobile-responsive/phases/05-dialogs-action-bar/05-02-SUMMARY.md`
</output>
